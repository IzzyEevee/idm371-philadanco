var tinymce,tinyMCE,tinyMCEPopup={init:function(){var n=this,e,t,i;e=n.getWin(),tinymce=tinyMCE=e.tinymce,n.editor=tinymce.EditorManager.activeEditor,n.params=n.editor.windowManager.getParams(),i=n.editor.windowManager.windows[n.editor.windowManager.windows.length-1],n.features=i.features,n.uiWindow=i,!1!==(t=n.editor.settings).popup_css&&(t.popup_css?t.popup_css=n.editor.documentBaseURI.toAbsolute(t.popup_css):t.popup_css=n.editor.baseURI.toAbsolute("plugins/compat3x/css/dialog.css")),t.popup_css_add&&(t.popup_css+=","+n.editor.documentBaseURI.toAbsolute(t.popup_css_add)),n.dom=n.editor.windowManager.createInstance("tinymce.dom.DOMUtils",document,{ownEvents:!0,proxy:tinyMCEPopup._eventProxy}),n.dom.bind(window,"ready",n._onDOMLoaded,n),!1!==n.features.popup_css&&n.dom.loadCSS(n.features.popup_css||n.editor.settings.popup_css),n.listeners=[],n.onInit={add:function(e,t){n.listeners.push({func:e,scope:t})}},n.isWindow=!n.getWindowArg("mce_inline"),n.id=n.getWindowArg("mce_window_id")},getWin:function(){return!window.frameElement&&window.dialogArguments||opener||parent||top},getWindowArg:function(e,t){var n=this.params[e];return tinymce.is(n)?n:t},getParam:function(e,t){return this.editor.getParam(e,t)},getLang:function(e,t){return this.editor.getLang(e,t)},execCommand:function(e,t,n,i){return(i=i||{}).skip_focus=1,this.restoreSelection(),this.editor.execCommand(e,t,n,i)},resizeToInnerSize:function(){},executeOnLoad:function(evil){this.onInit.add(function(){eval(evil)})},storeSelection:function(){this.editor.windowManager.bookmark=tinyMCEPopup.editor.selection.getBookmark(1)},restoreSelection:function(){var e=tinyMCEPopup;!e.isWindow&&tinymce.isIE&&e.editor.selection.moveToBookmark(e.editor.windowManager.bookmark)},requireLangPack:function(){var e=this,t=e.getWindowArg("plugin_url")||e.getWindowArg("theme_url"),n=e.editor.settings,i;!1!==n.language&&(i=n.language||"en"),t&&i&&!1!==e.features.translate_i18n&&!1!==n.language_load&&(t+="/langs/"+i+"_dlg.js",tinymce.ScriptLoader.isDone(t)||(document.write('<script type="text/javascript" src="'+t+'"><\/script>'),tinymce.ScriptLoader.markDone(t)))},pickColor:function(e,t){var n=document.getElementById(t),i=this.editor.settings.color_picker_callback;i&&i.call(this.editor,function(e){n.value=e;try{n.onchange()}catch(e){}},n.value)},openBrowser:function(e,t){tinyMCEPopup.restoreSelection(),this.editor.execCallback("file_browser_callback",e,document.getElementById(e).value,t,window)},confirm:function(e,t,n){this.editor.windowManager.confirm(e,t,n,window)},alert:function(e,t,n){this.editor.windowManager.alert(e,t,n,window)},close:function(){var e=this;function t(){e.editor.windowManager.close(window),tinymce=tinyMCE=e.editor=e.params=e.dom=e.dom.doc=null}tinymce.isOpera?e.getWin().setTimeout(t,0):t()},_restoreSelection:function(){var e=window.event.srcElement;"INPUT"!=e.nodeName||"submit"!=e.type&&"button"!=e.type||tinyMCEPopup.restoreSelection()},_onDOMLoaded:function(){var t=tinyMCEPopup,e=document.title,n,i;if(!1!==t.features.translate_i18n){var o={update:"Ok",insert:"Ok",cancel:"Cancel",not_set:"--",class_name:"Class name",browse:"Browse"},s=(tinymce.settings?tinymce.settings:t.editor.settings).language||"en";for(var r in o)tinymce.i18n.data[s+"."+r]=tinymce.i18n.translate(o[r]);n=document.body.innerHTML,tinymce.isIE&&(n=n.replace(/ (value|title|alt)=([^"][^\s>]+)/gi,' $1="$2"')),document.dir=t.editor.getParam("directionality",""),(i=t.editor.translate(n))&&i!=n&&(document.body.innerHTML=i),(i=t.editor.translate(e))&&i!=e&&(document.title=e=i)}t.editor.getParam("browser_preferred_colors",!1)&&t.isWindow||t.dom.addClass(document.body,"forceColors"),document.body.style.display="",tinymce.Env.ie&&(tinymce.Env.ie<11?(document.attachEvent("onmouseup",tinyMCEPopup._restoreSelection),t.dom.add(t.dom.select("head")[0],"base",{target:"_self"})):document.addEventListener("mouseup",tinyMCEPopup._restoreSelection,!1)),t.restoreSelection(),t.resizeToInnerSize(),t.isWindow?window.focus():t.editor.windowManager.setTitle(window,e),tinymce.isIE||t.isWindow||t.dom.bind(document,"focus",function(){t.editor.windowManager.focus(t.id)}),tinymce.each(t.dom.select("select"),function(e){e.onkeydown=tinyMCEPopup._accessHandler}),tinymce.each(t.listeners,function(e){e.func.call(e.scope,t.editor)}),t.getWindowArg("mce_auto_focus",!0)&&(window.focus(),tinymce.each(document.forms,function(e){tinymce.each(e.elements,function(e){if(t.dom.hasClass(e,"mceFocus")&&!e.disabled)return e.focus(),!1})})),document.onkeyup=tinyMCEPopup._closeWinKeyHandler,"textContent"in document?t.uiWindow.getEl("head").firstChild.textContent=document.title:t.uiWindow.getEl("head").firstChild.innerText=document.title},_accessHandler:function(e){if(13==(e=e||window.event).keyCode||32==e.keyCode){var t=e.target||e.srcElement;return t.onchange&&t.onchange(),tinymce.dom.Event.cancel(e)}},_closeWinKeyHandler:function(e){27==(e=e||window.event).keyCode&&tinyMCEPopup.close()},_eventProxy:function(t){return function(e){tinyMCEPopup.dom.events.callNativeHandler(t,e)}}};tinyMCEPopup.init(),tinymce.util.Dispatcher=function(e){this.scope=e||this,this.listeners=[],this.add=function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},this.addToTop=function(e,t){var n=this,i={cb:e,scope:t||n.scope};return n.inDispatch?n.listeners=[i].concat(n.listeners):n.listeners.unshift(i),e},this.remove=function(n){var i=this.listeners,o=null;return tinymce.each(i,function(e,t){if(n==e.cb)return o=e,i.splice(t,1),!1}),o},this.dispatch=function(){var e=this,t,n=arguments,i,o=e.listeners,s;for(e.inDispatch=!0,i=0;i<o.length&&!1!==(t=(s=o[i]).cb.apply(s.scope,0<n.length?n:[s.scope]));i++);return e.inDispatch=!1,t}};