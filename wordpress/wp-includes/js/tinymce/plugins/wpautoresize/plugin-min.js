tinymce.PluginManager.add("wpautoresize",function(c){var f=c.settings,y=300,p=!1;function _(){return c.plugins.fullscreen&&c.plugins.fullscreen.isFullscreen()}function w(e){return parseInt(e,10)||0}function z(e){var t,o,n,i,a=tinymce.DOM,s,u,r,l,d,g,m,h;p&&(o=c.getDoc())&&(e=e||{},n=o.body,i=o.documentElement,s=f.autoresize_min_height,!n||e&&"setcontent"===e.type&&e.initial||_()?n&&i&&(n.style.overflowY="auto",i.style.overflowY="auto"):(r=c.dom.getStyle(n,"margin-top",!0),l=c.dom.getStyle(n,"margin-bottom",!0),d=c.dom.getStyle(n,"padding-top",!0),g=c.dom.getStyle(n,"padding-bottom",!0),m=c.dom.getStyle(n,"border-top-width",!0),h=c.dom.getStyle(n,"border-bottom-width",!0),(u=n.offsetHeight+w(r)+w(l)+w(d)+w(g)+w(m)+w(h))&&u<i.offsetHeight&&(u=i.offsetHeight),(isNaN(u)||u<=0)&&(u=tinymce.Env.ie?n.scrollHeight:tinymce.Env.webkit&&0===n.clientHeight?0:n.offsetHeight),u>f.autoresize_min_height&&(s=u),f.autoresize_max_height&&u>f.autoresize_max_height?(s=f.autoresize_max_height,n.style.overflowY="auto",i.style.overflowY="auto"):(n.style.overflowY="hidden",i.style.overflowY="hidden",n.scrollTop=0),s!==y&&(t=s-y,a.setStyle(c.iframeElement,"height",s+"px"),y=s,tinymce.isWebKit&&t<0&&z(e),c.fire("wp-autoresize",{height:s,deltaHeight:"nodechange"===e.type?t:null}))))}function n(e,t,o){setTimeout(function(){z(),e--?n(e,t,o):o&&o()},t)}function e(){c.dom.hasClass(c.getBody(),"wp-autoresize")||(p=!0,c.dom.addClass(c.getBody(),"wp-autoresize"),c.on("nodechange setcontent keyup FullscreenStateChanged",z),z())}function t(){var e;f.wp_autoresize_on||(p=!1,e=c.getDoc(),c.dom.removeClass(c.getBody(),"wp-autoresize"),c.off("nodechange setcontent keyup FullscreenStateChanged",z),e.body.style.overflowY="auto",e.documentElement.style.overflowY="auto",y=0)}c.settings.inline||tinymce.Env.iOS||(f.autoresize_min_height=parseInt(c.getParam("autoresize_min_height",c.getElement().offsetHeight),10),f.autoresize_max_height=parseInt(c.getParam("autoresize_max_height",0),10),f.wp_autoresize_on&&(p=!0,c.on("init",function(){c.dom.addClass(c.getBody(),"wp-autoresize")}),c.on("nodechange keyup FullscreenStateChanged",z),c.on("setcontent",function(){n(3,100)}),c.getParam("autoresize_on_init",!0)&&c.on("init",function(){n(10,200,function(){n(5,1e3)})})),c.on("show",function(){y=0}),c.addCommand("wpAutoResize",z),c.addCommand("wpAutoResizeOn",e),c.addCommand("wpAutoResizeOff",t))});