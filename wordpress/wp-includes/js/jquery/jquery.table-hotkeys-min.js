!function(p){p.fn.filter_visible=function(r){r=r||3;var e=function(){var e=p(this),t;for(t=0;t<r-1;++t){if(!e.is(":visible"))return!1;e=e.parent()}return!0};return this.filter(e)},p.table_hotkeys=function(t,e,n){var r,i,s,_,o,c,l,u,h,a,f,k,y;n=p.extend(p.table_hotkeys.defaults,n),r=n.class_prefix+n.selected_suffix,i=n.class_prefix+n.destructive_suffix,s=function(e){p.table_hotkeys.current_row&&p.table_hotkeys.current_row.removeClass(r),e.addClass(r),e[0].scrollIntoView(!1),p.table_hotkeys.current_row=e},_=function(e){!c(e)&&p.isFunction(n[e+"_page_link_cb"])&&n[e+"_page_link_cb"]()},o=function(e){var t,r;return p.table_hotkeys.current_row?(r="prev"==e?p.fn.prevAll:p.fn.nextAll).call(p.table_hotkeys.current_row,n.cycle_expr).filter_visible()[0]:(t=a(),(p.table_hotkeys.current_row=t)[0])},c=function(e){var t=o(e);return!!t&&(s(p(t)),!0)},l=function(){return c("prev")},u=function(){return c("next")},h=function(){p(n.checkbox_expr,p.table_hotkeys.current_row).each(function(){this.checked=!this.checked})},f=function(){var e=p(n.cycle_expr,t).filter_visible();return e.eq(e.length-1)},k=function(t){return function(){if(null==p.table_hotkeys.current_row)return!1;var e=p(t,p.table_hotkeys.current_row);if(!e.length)return!1;e.is("."+i)&&(u()||l()),e.click()}},(y=(a=function(){return p(n.cycle_expr,t).filter_visible().eq(n.start_row_index)})()).length&&(n.highlight_first?s(y):n.highlight_last&&s(f()),p.hotkeys.add(n.prev_key,n.hotkeys_opts,function(){return _("prev")}),p.hotkeys.add(n.next_key,n.hotkeys_opts,function(){return _("next")}),p.hotkeys.add(n.mark_key,n.hotkeys_opts,h),p.each(e,function(){var t,e;p.isFunction(this[1])?(t=this[1],e=this[0],p.hotkeys.add(e,n.hotkeys_opts,function(e){return t(e,p.table_hotkeys.current_row)})):(e=this,p.hotkeys.add(e,n.hotkeys_opts,k("."+n.class_prefix+e)))}))},p.table_hotkeys.current_row=null,p.table_hotkeys.defaults={cycle_expr:"tr",class_prefix:"vim-",selected_suffix:"current",destructive_suffix:"destructive",hotkeys_opts:{disableInInput:!0,type:"keypress"},checkbox_expr:":checkbox",next_key:"j",prev_key:"k",mark_key:"x",start_row_index:2,highlight_first:!1,highlight_last:!1,next_page_link_cb:!1,prev_page_link_cb:!1}}(jQuery);